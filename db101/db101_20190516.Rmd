---
title: "R_basic3"
author: "York Lin"
date: "2019年05月16日"
output: html_document
editor_options: 
  chunk_output_type: console
---
###繪製基本圖形
- plot	繪製基本圖(畫布)

###增添額外資訊
- lines	把資料點用線連接
- points	繪製新的資料點
- text	補充文字說明在圖上
- title	補充主旨
- mtext	在圖外顯示大主旨
- axis	增加軸的labels

###plot type
```{r}
x <- 1:6
y <- x
par(mfrow=c(2,4))
types <- c('p','l', 'o', 'b', 'c', 's', 'h', 'n')
for(t in types){
  #print(t)
  title <- paste('type:', t)
  plot(x,y, type = t, main = title)
}

```

### plot example
```{r}
data(iris)
str(iris)
plot(iris$Petal.Length,iris$Petal.Width,type='n')
points(iris$Petal.Length,iris$Petal.Width,col=iris$Species)
abline(h=0.9,col='grey',lty = 2)
abline(v=2.5,col='grey',lty = 2)
#legend(4.5,1,pch=1,legend = levels(iris$Species),col=1:3)
legend('bottomright',pch=1,legend = levels(iris$Species),col=1:3)
#text(iris$Petal.Length+0.1,iris$Petal.Width+0.05,1:nrow(iris),cex=0.5)
text(iris$Petal.Length+0.1,iris$Petal.Width+0.05,paste('(',iris$Petal.Length,', ',iris$Petal.Width,')'),cex=0.5)

title("iris")
```

### package:ggplot2
##### documentation
- http://docs.ggplot2.org/current/

##### cheat sheet
- https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf

##### why ggplot2?
- fancy by default, good for demo and report 
- consistent across all kinds of plot in syntax and behavior
- strong support community(the mostly download package on CRAN)
```{R}
#basic syntax
#ggplot(data,aes(x,y,group,...))+geom_object(...)
#install.packages('ggplot2')

library('ggplot2')
setwd('~/lecture/riii')

load('./Statistics/cdc.Rdata')
cdc$exerany = as.factor(cdc$exerany)
cdc$hlthplan = as.factor(cdc$hlthplan)
cdc$smoke100 = as.factor(cdc$smoke100)

g <- ggplot(cdc,aes(x=height,y=weight))
g+geom_point()

g <- ggplot(cdc,aes(x=height,y=weight,col=gender))
g+geom_point()

g <- ggplot(cdc,aes(x=height,y=weight))
g+geom_point(aes(col=gender))

g <- ggplot(cdc,aes(x=genhlth))
g+geom_bar()
g+geom_bar() + ylab('次數') + ggtitle('健康狀況長條圖')
#fill => 填滿顏色; color => 邊線顏色
g+geom_bar(fill='snow',color='black')

g+geom_bar(aes(col=gender))+ylab("次數")+ggtitle("健康狀況長條圖")
```

### ggplot2(續)
```{R}
## theme
g+geom_bar(aes(col=gender))+ylab("次數")+ggtitle("健康狀況長條圖") + theme(text=element_text(size=16,  family="Songti SC"))

##position
g = ggplot(cdc,aes(x=gender))
g+geom_bar(aes(fill=genhlth),position='stack')
g+geom_bar(aes(fill=genhlth),position='dodge')
g+geom_bar(aes(fill=genhlth),position='fill')
g+geom_bar(aes(fill=genhlth),position='identity')

#facet
g <- ggplot(cdc,aes(x=weight))
g+ geom_histogram()+facet_wrap(~genhlth)
g+ geom_histogram()+facet_grid(~genhlth)
g+ geom_histogram()+facet_grid(gender~genhlth)

#coordinate
g <- ggplot(cdc,aes(x=genhlth))
g+geom_bar()+coord_flip()

g+geom_bar()+coord_polar(theta = 'x')
g+geom_bar()+coord_polar(theta = 'y')
g+geom_bar(aes(fill=gender))+coord_polar(theta = 'y')

#pie chart
ggplot(cdc,aes(x=1)) + geom_bar(aes(fill=genhlth)) + coord_polar(theta = 'y')

#stat function
?geom_bar
g <- ggplot(cdc,aes(x=genhlth))
g+geom_bar()
g+stat_count()

precounted = as.data.frame(table(cdc$genhlth,dnn = c('genhlth')))
precounted
g2 = ggplot(precounted,aes(x=genhlth,y=Freq))+ geom_bar(stat='identity')

#save
ggsave(filename = './g2.jpg',plot=g2)
```
